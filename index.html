<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>The Psychic Game</title>
    <meta charset="UTF-8">
    <title>Jim Girardeau</title>
    <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <script src="assets/javascript/game.js"></script>
</head>
</head>

<body>
    <h1 style="color:blue;">Guess an impressionist painter; push any key to start.</h1>

    <div id="Win">Wins: 0</div>
    <div id="Lose">Losses: 0</div>
    <p></p>
    <div>Current Word</div>
    <p></p>
    <div id="Word">_________</div>
    <p></p>
    <div id="Left">Guesses left: 14</div>
    <div id="soFar">Your Guesses so far:</div>
    <p></p>
    <div id="debug"></div>

    <script>
        // declare vars
        var wins = 0;
        var losses = 0;
        var guessesLeft = 14;
        var guessSoFar = " ";
        var computerGuess = "";
        var possibleGuesses = "abcdefghijklmnopqrstuvwxyz";
        var wordDisplay="";
       // var audio = new Audio('Twilight-zone-song.mp3');
        var artists = [
            "Claude Monet",
            "Vincent van Gogh",
            "Pierre Auguste Renoir",
            "Edgar Degas",
            "Paul Cezanne",
            "Edouard Manet"
        ];

        function reset_game(){
                guessesLeft=14;
                wordDisplay="_________"; 
                guessSoFar=" ";
        }
        document.onkeyup = function(event) {
            // Connect variables
            var userGuess = event.key;
            var winElement = document.getElementById('Win');
            var loseElement = document.getElementById('Lose');
            var leftElement = document.getElementById('Left');
            var soFarElement = document.getElementById('soFar');
            var wordElement = document.getElementById('Word');
            var debugElement = document.getElementById('debug');
            // start of game
            if (guessesLeft === 14) {
                // start of game, so pick a key
                var random = Math.floor(Math.random() * artists.length);
                computerGuess = artists[random].toLowerCase();
                guessSoFar=" ";
            }
            if(guessSoFar.indexOf(userGuess)<0){
                guessSoFar+=userGuess;
                guessesLeft--;
            }
            // generate string to print
            wordDisplay="";
            for(var i=0;i<computerGuess.length;i++){
                var char=computerGuess[i];
                if(guessSoFar.indexOf(char)<0){
                    wordDisplay+="_";
                }
                else{
                    wordDisplay+=char;
                }
            }
            if(wordDisplay===computerGuess){
                wins++;
                reset_game();
            }

            if(guessesLeft===0){
                losses++;
                reset_game();
            }

            // Output results
            winElement.textContent = "Wins: " + wins;
            loseElement.textContent = "Losses: " + losses;
            leftElement.textContent = "Guesses left: " + guessesLeft;
            soFarElement.textContent = "Your Guesses so far: " + guessSoFar;
            wordElement.textContent = wordDisplay;
            debugElement.textContent = computerGuess;
        }
    </script>

</body>

</html>